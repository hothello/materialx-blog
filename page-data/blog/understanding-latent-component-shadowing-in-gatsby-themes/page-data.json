{"componentChunkName":"component---node-modules-gatsby-theme-catalyst-blog-src-templates-post-query-js","path":"/blog/understanding-latent-component-shadowing-in-gatsby-themes/","result":{"data":{"catalystPost":{"__typename":"MdxCatalystPost","id":"43f802d5-c665-5ad6-a1f7-7d54f121b300","excerpt":"As I worked on building themes for Gatsby I went through a number of different iterations trying to find an approach that would allow for easy composition and clear separation of concerns. The lightbulb went off for me when I read  John Otander’s blog post  on the topic of latent component shadowing…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Understanding latent component shadowing in Gatsby themes\",\n  \"author\": \"Eric Howey\",\n  \"authorLink\": \"https://twitter.com/erchwy\",\n  \"tags\": [\"Catalyst\", \"Gatsby\", \"Themes\"],\n  \"date\": \"2020-01-12T00:00:00.000Z\",\n  \"featuredImage\": \"../post-assets/featured-latent-shadowing.jpg\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"As I worked on building themes for Gatsby I went through a number of different iterations trying to find an approach that would allow for easy composition and clear separation of concerns. The lightbulb went off for me when I read \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://johno.com/latent-component-shadowing\"\n  }), \"John Otander\\u2019s blog post\"), \" on the topic of latent component shadowing.\"), mdx(\"p\", null, \"Here is a metaphor that has helped me to conceptualize how latent shadowing works using a core theme and set of sub-themes.\"), mdx(\"p\", null, \"We are all familiar with computers and computer ports (USB, HDMI, SD card, etc). When these ports are unused they sit idle, doing nothing. But when you plug something in they suddenly power on and provide access to a host of new features, e.g. an external monitor.\"), mdx(\"p\", null, \"In this analogy the core theme is the computer and sub-themes are different peripheral devices. The core theme provides specific \\u201Cports\\u201D for sub-themes to link with. When \\u201Cplugged in\\u201D these sub-themes then extend the core theme adding new functions or actions but rely on the core theme for their \\u201Cpower\\u201D.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1440px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACo0lEQVQ4y4WTa0iTYRTHnzYzQoSICLOaN5Y0E1IU1JASjTIoKSytUAlGH9S8Tc2kIjCTIMIulEFSCNHWlzSa1djFmm0u8fbqnNucc0ytZJuzobnbc3qftzTB2/lyzsP5PX/Oed//g9Cy+DEKS7XsvS5ZLbPqFmwAP83wdjkXG1XCIrnq9D0UE1eDVo0BtYPJAIDkYn3tO1E37v4yBb2d0576WjFknX0ojo8R1NMIm3AJ+8rYi3f3RpasFFRJLUv1548m1UivCySthoXqUhE0PJH7h+YAXrTpID31liYAnYomXFJ4EQutF1SXk/VvytDmR6ox/qVmeCXT+nVuwD22eZ/eCx6FfhbyC57+Dtt5OZuwh2MrWaERq0zY+rprceVNJKcdvyuUGRwgGTb6WjVD+I2yB3+gTDAG4B50AeTkN/XRWCBhOZGlKwXHtYB40RVL58S4ax1K8xx0mCZ90hErfNKasUw/gfscHn+/kxY8/3gUoR1BDJtQu/rKW7rtKJEnCCB1aHBBSZOoD7q+270SrQUrjFNYbpikV3d5hHITpCXfaCRcTmYDO/Pcg7W/Y0rKTWblQHSSW35V6O53ukE94cDkpwzPAzYD4Lr7EtjOzj1KuENJ19lrioXEVCEubQFiHcYaB2sU7ZQNvk27fZ0WF1ZaZv1SwwxkZNwx0e7ZSpgITjE6kV639oTbeJUo9UA1M2XI7sKo7KzGkSL+SygrbPEW8VsgL+fZbBS3Ip70yy88R3vCilHQkdvrugeB//+LUbTrNZI2LRCjU+oZsOrATm+wmfTMOkAbxq79AkSpnUz9VQrsfpVdSb8WbKJ8v0Ypr2dci61quS2Y9Cf1gDjhVzYWHRv0/53UC8g44DlGi+XRtsq1DMNF8xA+Q/cZJ9D1irt/AI+yZW7G/LtaAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/474077cff55e98f9871429add044a96b/a3012/model-latent-shadowing.webp 360w\", \"/static/474077cff55e98f9871429add044a96b/bc514/model-latent-shadowing.webp 720w\", \"/static/474077cff55e98f9871429add044a96b/f992d/model-latent-shadowing.webp 1440w\", \"/static/474077cff55e98f9871429add044a96b/6d2c9/model-latent-shadowing.webp 2160w\", \"/static/474077cff55e98f9871429add044a96b/46261/model-latent-shadowing.webp 2400w\"],\n    \"sizes\": \"(max-width: 1440px) 100vw, 1440px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/474077cff55e98f9871429add044a96b/f21e7/model-latent-shadowing.png 360w\", \"/static/474077cff55e98f9871429add044a96b/37523/model-latent-shadowing.png 720w\", \"/static/474077cff55e98f9871429add044a96b/07a9c/model-latent-shadowing.png 1440w\", \"/static/474077cff55e98f9871429add044a96b/b3608/model-latent-shadowing.png 2160w\", \"/static/474077cff55e98f9871429add044a96b/97a96/model-latent-shadowing.png 2400w\"],\n    \"sizes\": \"(max-width: 1440px) 100vw, 1440px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/474077cff55e98f9871429add044a96b/07a9c/model-latent-shadowing.png\",\n    \"alt\": \"Model of latent component shadowing\",\n    \"title\": \"Model of latent component shadowing\",\n    \"loading\": \"lazy\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  })), \"\\n      \"), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"lets-take-a-look-at-this-idea-in-action\"\n  }, \"Let\\u2019s take a look at this idea in action\"), mdx(\"p\", null, \"With Gatsby Theme Catalyst one of my goals was to be able to easily swap out headers and footers without modifying the core theme. To enable this functionality the core theme has two \\u201Cports\\u201D, or components, one for a header and one for a footer - \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"header.js\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"footer.js\"), \".\"), mdx(\"p\", null, \"In the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gatsby-starter-catalyst-core.netlify.com/\"\n  }), \"core theme\"), \" these components just return a placeholder div but could even return null if you wanted to remove them entirely. But the presence of these components in the core theme means they can be shadowed by a sub-theme to add functioning headers and footers. The beauty in this approach is that the header exists as a discrete unit that can be deleted, modified or changed without affecting the core theme in any way.\"), mdx(\"p\", null, \"Upgrading your external monitor? Unplug the old one, plug in the new one. Changing your site header? Unplug the old one, plug in the new one. It is that straight forward and that powerful!\"), mdx(\"h2\", {\n    \"id\": \"the-code\"\n  }, \"The Code\"), mdx(\"p\", null, \"You can dig into the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ehowey/gatsby-theme-catalyst\"\n  }), \"Gatsby Catalyst Theme Repo\"), \" to see this example in more detail. This shows how I implemented a latent header.js component in the core theme and then shadowed it in a sub-theme. You can check out the result of this process with the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gatsby-starter-catalyst-basic.netlify.com/\"\n  }), \"catalyst basic\"), \" which includes sub-themes for the header and footer on top of the core theme.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-catalyst-core/src/components/header.js\")), mdx(\"p\", null, \"This is the latent component, or \\u201Cport\\u201D, that exists as a placeholder in the core theme.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"// This is a placeholder for latent shadowing in sibling themes\\n/** @jsx jsx */\\nimport { jsx } from \\\"theme-ui\\\"\\n\\nconst SiteHeader = () => {\\n  return (\\n    <header\\n      sx={{\\n        bg: \\\"#ddd\\\",\\n        p: 3,\\n        variant: \\\"variants.header\\\",\\n      }}\\n      id=\\\"header\\\"\\n    >\\n      <p>Header area for latent shadowing in sibling themes</p>\\n    </header>\\n  )\\n}\\n\\nexport default SiteHeader\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-catalyst-header-basic/src/gatsby-theme-catalyst-core/components/header.js\")), mdx(\"p\", null, \"This is the shadowing of the latent component that happens in the header sub-theme, note the omission of a second \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/\"), \" in the folder structure.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import Header from \\\"../../components/header\\\"\\n\\nexport default Header\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-catalyst-header-basic/src/components/header.js\")), mdx(\"p\", null, \"The actual header component that will now be used in the sub-theme.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"/** @jsx jsx */\\nimport { jsx } from \\\"theme-ui\\\"\\nimport { useContext } from \\\"react\\\"\\nimport HeaderLayout from \\\"./header-layout\\\"\\nimport Branding from \\\"./branding/branding\\\"\\nimport Nav from \\\"./navbar/nav-layout\\\"\\nimport { NavContext } from \\\"gatsby-theme-catalyst-core\\\"\\nimport { useCatalystConfig } from \\\"gatsby-theme-catalyst-core\\\"\\n\\nconst SiteHeader = () => {\\n  const [isNavOpen] = useContext(NavContext)\\n  const { useStickyHeader } = useCatalystConfig()\\n\\n  return (\\n    <header\\n      sx={{\\n        display: \\\"grid\\\",\\n        position: useStickyHeader ? \\\"sticky\\\" : \\\"static\\\",\\n        top: 0,\\n        width: \\\"100%\\\",\\n        color: isNavOpen ? \\\"header.textOpen\\\" : \\\"header.text\\\",\\n        backgroundColor: isNavOpen\\n          ? \\\"header.backgroundOpen\\\"\\n          : \\\"header.background\\\",\\n        zIndex: \\\"888\\\", // Ensure the header is always on top\\n      }}\\n      id=\\\"header\\\"\\n    >\\n      <HeaderLayout>\\n        <Branding />\\n        <Nav />\\n      </HeaderLayout>\\n    </header>\\n  )\\n}\\n\\nexport default SiteHeader\\n\")), mdx(\"p\", null, \"Understanding the power of latent component shadowing unlocked a whole new set of possibilities for me when building complex themes with Gatsby. I hope this explanation helps along your journey! Happy coding!\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/blog/understanding-latent-component-shadowing-in-gatsby-themes/","title":"Understanding latent component shadowing in Gatsby themes","author":"Eric Howey","authorLink":"https://twitter.com/erchwy","tags":["Catalyst","Gatsby","Themes"],"keywords":[],"timeToRead":2,"date":"January 12, 2020","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAEoN2a8sf/EABsQAAEEAwAAAAAAAAAAAAAAAAIAAQMSERMx/9oACAEBAAEFAqtqiyb1R8Eayr//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAABBQEAAAAAAAAAAAAAAAABAAIQETFB/9oACAEBAAY/Ag7qEBCsrI//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAQQVEh/9oACAEBAAE/IW2WvMWFgXrvP1rPC6yU4X//2gAMAwEAAgADAAAAEATv/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/ENqv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EIx//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBkeH/2gAIAQEAAT8QUBA0tdtrCCaDoS9OXmb4hxxk0ryWr2g6m/Y63P/Z","aspectRatio":1.4992458521870287,"src":"/static/00537d90b7296debefae8c276fe45f86/7f945/featured-latent-shadowing.jpg","srcSet":"/static/00537d90b7296debefae8c276fe45f86/e2788/featured-latent-shadowing.jpg 360w,\n/static/00537d90b7296debefae8c276fe45f86/7d509/featured-latent-shadowing.jpg 720w,\n/static/00537d90b7296debefae8c276fe45f86/7f945/featured-latent-shadowing.jpg 1440w,\n/static/00537d90b7296debefae8c276fe45f86/47dad/featured-latent-shadowing.jpg 2160w,\n/static/00537d90b7296debefae8c276fe45f86/af56c/featured-latent-shadowing.jpg 2880w,\n/static/00537d90b7296debefae8c276fe45f86/f2689/featured-latent-shadowing.jpg 7952w","sizes":"(max-width: 1440px) 100vw, 1440px"},"seo":{"src":"/static/00537d90b7296debefae8c276fe45f86/16310/featured-latent-shadowing.jpg","width":1024,"height":683}}}},"previous":{"__typename":"MdxCatalystPost","id":"11c2ae89-da84-5740-af2b-18299430f4ef","excerpt":"Theme-UI provides a great pattern for  implementing dark mode  on your Gatsby website. If your site is primarily text, this can be as straightforward as changing a few colors in your theme and off you go. Most websites are not so minimal and include images, icons, background patterns, etc. If you…","slug":"/blog/how-to-display-alternate-content-in-dark-mode-using-theme-ui/","title":"How to display alternate content in dark mode using Theme-UI","date":"January 08, 2020"},"next":{"__typename":"MdxCatalystPost","id":"37020e75-89e2-5d90-bb43-6b12790c53c8","excerpt":"This Gatsby theme is for freelance writers and journalists who want a fast, easy to maintain, and elegant portfolio. The backend data is provided by  SANITY.io  and the front end is based on  Catalyst themes . This tutorial assumes basic familiarity with web development and Gatsby. If you are new to…","slug":"/blog/getting-started-with-gatsby-theme-catalyst-writer/","title":"Getting Started With Gatsby-Theme-Catalyst-Writer","date":"January 28, 2020"}},"pageContext":{"id":"43f802d5-c665-5ad6-a1f7-7d54f121b300","previousId":"11c2ae89-da84-5740-af2b-18299430f4ef","nextId":"37020e75-89e2-5d90-bb43-6b12790c53c8"}}}